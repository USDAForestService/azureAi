<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat with me</title>
</head>
<body>
  <form id="myForm">
    <p><label for="txtQuestion" Enter questin here>Please Type your question here</label></p>
    <textarea name="txtQuestion" id="txtQuestion" placeholder="Enter your questoin here" cols="100"></textarea><br>
    <p><label for="txtPrompt">Please enter your prompt text here:</label></p>
    <textarea name="txtPrompt" id="txtPrompt" placeholder="Enter your text here for summarization" rows="8" cols="150"></textarea><br>
    <input type="submit" id="submitBtn" value="Submit">
  </form>
  <p id="txtRespChoice"></p>
  <script>
    // Select the form
    const form = document.querySelector('#myForm');

    // Add an event listener for the form's submit event
    form.addEventListener('submit', async (event) => {
      // Prevent the form from being submitted normally
      event.preventDefault();

      try {
        document.getElementById('txtRespChoice').textContent = "loading...";
        // Make a fetch request to the '/execute' endpoint
        const response = await fetch('/execute', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          // Send the value of the text field as the body of the request
          body: JSON.stringify(
            { txtPrompt: document.querySelector('#txtPrompt').value, txtQuestion: document.querySelector('#txtQuestion').value }
            )
        });

        // Convert the response to JSON
        const data = await response.json();

        // Update the text content of the '#txtRespChoice' element with the response data
        document.getElementById('txtRespChoice').textContent = data;
      } catch (err) {
        // Log any errors
        console.error(err);
      }
    });
  </script>
</body>
</html>